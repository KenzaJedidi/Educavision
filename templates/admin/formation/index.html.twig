{% extends 'admin/layout.html.twig' %}

{% block title %}Les Formations - EducaVision{% endblock %}

{% block breadcrumb_title %}Les Formations{% endblock %}

{% block breadcrumb_items %}
<li>Les Formations</li>
{% endblock %}

{% block body %}
<div class="row">
	<div class="col-lg-12 m-b30">
		<div class="widget-box">
			<div class="wc-title">
				<h4>Gestion des Formations</h4>
				<a href="{{ path('admin_formation_new') }}" class="btn button-sm green float-right">
					<i class="fa fa-plus"></i> Ajouter une Formation
				</a>
			</div>
			<div class="widget-inner">
				{% for formation in formations %}
				<div class="card-courses-list admin-courses">
					<div class="card-courses-media">
						{% if formation.image %}
							<img src="{{ asset('uploads/formations/' ~ formation.image) }}" alt="{{ formation.nom }}" />
						{% else %}
							<img src="{{ asset('assets/images/courses/pic2.jpg') }}" alt="{{ formation.nom }}" />
						{% endif %}
					</div>
					<div class="card-courses-full-dec">
						<div class="card-courses-title">
							<h4>{{ formation.nom }}</h4>
						</div>
						<div class="card-courses-list-bx">
							<ul class="card-courses-view">
								<li class="card-courses-categories">
									<h5>Niveau</h5>
									<h4>{{ formation.niveau }}</h4>
								</li>
								<li class="card-courses-user">
									<div class="card-courses-user-info">
										<h5>Durée</h5>
										<h4>{{ formation.duree }}</h4>
									</div>
								</li>
								<li class="card-courses-review">
									<h5>Prérequis</h5>
									<h4>{{ formation.prerequis|length }} étape(s)</h4>
								</li>
							</ul>
						</div>
						<div class="row card-courses-dec">
							<div class="col-md-12">
								<h6 class="m-b10">Description de la formation</h6>
								<p>{{ formation.description|raw|slice(0, 200) }}...</p>
							</div>
							<div class="col-md-12">
								<a href="{{ path('admin_formation_show', {'id': formation.id}) }}" class="btn blue radius-xl outline">
									<i class="fa fa-eye"></i> Voir détails
								</a>
								<a href="{{ path('admin_formation_edit', {'id': formation.id}) }}" class="btn green radius-xl outline">
									<i class="fa fa-edit"></i> Modifier
								</a>
								<a href="{{ path('admin_formation_delete', {'id': formation.id}) }}" 
								   class="btn red outline radius-xl" 
								   onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette formation ?')">
									<i class="fa fa-trash"></i> Supprimer
								</a>
							</div>
						</div>
					</div>
				</div>
				{% else %}
				<div class="alert alert-info">
					<i class="fa fa-info-circle"></i> Aucune formation disponible pour le moment.
					<a href="{{ path('admin_formation_new') }}" class="btn button-sm green">Ajouter la première formation</a>
				</div>
				{% endfor %}
			</div>
		</div>
	</div>
</div>
{% endblock %}
