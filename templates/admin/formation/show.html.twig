{% extends 'admin/layout.html.twig' %}

{% block title %}{{ formation.nom }} - EducaVision{% endblock %}

{% block breadcrumb_title %}Détails de la Formation{% endblock %}

{% block breadcrumb_items %}
<li><a href="{{ path('admin_formation_index') }}">Les Formations</a></li>
<li>{{ formation.nom }}</li>
{% endblock %}

{% block body %}
<div class="row">
	<div class="col-lg-12 m-b30">
		<div class="widget-box">
			<div class="wc-title">
				<h4>{{ formation.nom }}</h4>
				<div class="float-right">
					<a href="{{ path('admin_formation_edit', {'id': formation.id}) }}" class="btn button-sm green">
						<i class="fa fa-edit"></i> Modifier
					</a>
					<a href="{{ path('admin_formation_delete', {'id': formation.id}) }}" 
					   class="btn button-sm red" 
					   onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette formation ?')">
						<i class="fa fa-trash"></i> Supprimer
					</a>
				</div>
			</div>
			<div class="widget-inner">
				<div class="row m-b20">
					<div class="col-md-4">
						{% if formation.image %}
							<img src="{{ asset('uploads/formations/' ~ formation.image) }}" alt="{{ formation.nom }}" class="img-fluid" />
						{% else %}
							<img src="{{ asset('assets/images/courses/pic2.jpg') }}" alt="{{ formation.nom }}" class="img-fluid" />
						{% endif %}
					</div>
					<div class="col-md-8">
						<div class="row">
							<div class="col-md-6">
								<h6><strong>Niveau :</strong></h6>
								<p><span class="badge badge-primary">{{ formation.niveau }}</span></p>
							</div>
							<div class="col-md-6">
								<h6><strong>Durée :</strong></h6>
								<p><i class="fa fa-clock-o"></i> {{ formation.duree }}</p>
							</div>
						</div>
						
						<div class="row m-t20">
							<div class="col-md-12">
								<h6><strong>Description :</strong></h6>
								<p>{{ formation.description|raw }}</p>
							</div>
						</div>
					</div>
				</div>
				
				<hr>
				
				<div class="row m-t20">
					<div class="col-md-6">
						<h6><strong>Prérequis :</strong></h6>
						{% if formation.prerequisTexte %}
							<p>{{ formation.prerequisTexte|raw }}</p>
						{% else %}
							<p class="text-muted">Aucun prérequis spécifié.</p>
						{% endif %}
					</div>
					
					<div class="col-md-6">
						<h6><strong>Compétences acquises :</strong></h6>
						{% if formation.competencesAcquises %}
							<p>{{ formation.competencesAcquises|raw }}</p>
						{% else %}
							<p class="text-muted">Aucune compétence spécifiée.</p>
						{% endif %}
					</div>
				</div>
				
				<hr>
				
				<div class="row m-t20">
					<div class="col-md-12">
						<h6><strong>Roadmap de la formation ({{ formation.prerequis|length }} étapes) :</strong></h6>
						{% if formation.prerequis|length > 0 %}
							<div class="timeline">
								{% for prerequis in formation.prerequis %}
									<div class="timeline-item">
										<div class="timeline-badge">{{ prerequis.ordre }}</div>
										<div class="timeline-panel">
											<div class="timeline-heading">
												<h5 class="timeline-title">{{ prerequis.nom }}</h5>
											</div>
											<div class="timeline-body">
												<p>{{ prerequis.description }}</p>
											</div>
										</div>
									</div>
								{% endfor %}
							</div>
						{% else %}
							<p class="text-muted">Aucune étape définie pour la roadmap.</p>
							<a href="#" class="btn button-sm green">
								<i class="fa fa-plus"></i> Ajouter des étapes
							</a>
						{% endif %}
					</div>
				</div>
				
				<div class="row m-t20">
					<div class="col-md-12">
						<a href="{{ path('admin_formation_index') }}" class="btn blue radius-xl">
							<i class="fa fa-arrow-left"></i> Retour à la liste
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<style>
.timeline {
    position: relative;
    padding: 20px 0;
}
.timeline-item {
    padding-left: 60px;
    position: relative;
    margin-bottom: 30px;
}
.timeline-badge {
    position: absolute;
    left: 0;
    top: 0;
    width: 40px;
    height: 40px;
    background: #007bff;
    border-radius: 50%;
    color: white;
    text-align: center;
    line-height: 40px;
    font-weight: bold;
}
.timeline-panel {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 5px;
}
.timeline-title {
    margin: 0 0 10px 0;
    color: #333;
}
.timeline-body p {
    margin: 0;
    color: #666;
}
</style>
{% endblock %}
